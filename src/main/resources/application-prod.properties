# ============================================
# Production Profile Configuration
# ============================================
# This profile is used for production deployment
# Activate with: SPRING_PROFILES_ACTIVE=prod
# IMPORTANT: Review and adjust all settings before deploying to production

# ============================================
# Database Configuration
# ============================================
# Production databases require SSL
spring.datasource.hikari.ssl=true
spring.datasource.hikari.sslmode=require
# Optimize connection pool for production
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=10
# Connection validation
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=3000

# ============================================
# JPA/Hibernate Configuration
# ============================================
# CRITICAL: Use 'validate' or 'none' in production
# Never use 'update', 'create', or 'create-drop' in production
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
# Optimize JPA for production
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# ============================================
# Logging Configuration
# ============================================
# Production logging - INFO level for performance
logging.level.root=INFO
logging.level.com.ashwani.HealthCare=INFO
# Reduce verbose logging from dependencies
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
# Log file rotation
logging.file.name=/app/logs/application.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30
logging.logback.rollingpolicy.total-size-cap=1GB

# ============================================
# Cashfree Configuration
# ============================================
# Use PRODUCTION environment (or SANDBOX for testing)
# Override with CASHFREE_ENV environment variable
cashfree.env=${CASHFREE_ENV:PRODUCTION}
# Webhook signature validation disabled
cashfree.webhook.signature.validation.enabled=false

# ============================================
# Actuator Configuration
# ============================================
# Limit exposed endpoints in production for security
management.endpoints.web.exposure.include=health,info
# Show health details only to authorized users
management.endpoint.health.show-details=when-authorized
# Disable sensitive endpoints
management.endpoint.env.enabled=false
management.endpoint.beans.enabled=false

# ============================================
# Server Configuration
# ============================================
# Production server settings
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain
server.compression.min-response-size=1024
# Error pages
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-binding-errors=never

# ============================================
# Security Recommendations
# ============================================
# 1. Use strong JWT_SECRET (minimum 256 bits)
# 2. Enable HTTPS/TLS
# 3. Use secrets management (AWS Secrets Manager, HashiCorp Vault)
# 4. Enable webhook signature validation
# 5. Use production-grade database credentials
# 6. Enable database connection encryption
# 7. Set up proper firewall rules
# 8. Enable application monitoring and alerting

