# ============================================
# Healthcare Management System - Base Configuration
# ============================================
# This file contains base configuration shared across all profiles
# Profile-specific overrides: application-dev.properties, application-docker.properties, application-prod.properties

# ============================================
# Application Metadata
# ============================================
spring.application.name=HealthCare

# ============================================
# Server Configuration
# ============================================
# Server address: 0.0.0.0 allows access from all network interfaces (useful for Docker/containers)
server.address=0.0.0.0
server.port=8080

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# Database connection settings - values come from environment variables
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
# ddl-auto options: none, validate, update, create, create-drop
# 'update' automatically creates/updates tables based on entities
# WARNING: Use 'validate' or 'none' in production for safety
spring.jpa.hibernate.ddl-auto=update
# Disable open-in-view to prevent lazy loading issues and improve performance
spring.jpa.open-in-view=false

# HikariCP Connection Pool Configuration
# SSL is required for cloud databases (Aiven, AWS RDS, etc.)
spring.datasource.hikari.ssl=true
spring.datasource.hikari.sslmode=require
# Connection timeout in milliseconds
spring.datasource.hikari.connection-timeout=20000
# Maximum pool size - adjust based on your database capacity
spring.datasource.hikari.maximum-pool-size=5
# Minimum idle connections
spring.datasource.hikari.minimum-idle=2
# Connection max lifetime (30 minutes)
spring.datasource.hikari.max-lifetime=1800000
# Idle timeout (10 minutes)
spring.datasource.hikari.idle-timeout=600000

# ============================================
# RabbitMQ Configuration
# ============================================
# RabbitMQ connection settings for asynchronous message processing
# Used for: Payment event processing, appointment notifications
spring.rabbitmq.addresses=${RABBITMQ_URL}
spring.rabbitmq.username=${RABBITMQ_USERNAME}
spring.rabbitmq.password=${RABBITMQ_PASSWORD}
# Enable automatic queue declaration (creates queues if they don't exist)
spring.rabbitmq.listener.simple.auto-declare=true
# Acknowledge mode: auto, manual, none
spring.rabbitmq.listener.simple.acknowledge-mode=auto
# Prefetch count (number of unacknowledged messages per consumer)
spring.rabbitmq.listener.simple.prefetch=10

# ============================================
# Email Configuration (SMTP)
# ============================================
# Gmail SMTP configuration (default)
# For other providers, override these in profile-specific files
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${EMAIL_ID}
spring.mail.password=${EMAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
# Connection timeout
spring.mail.properties.mail.smtp.connectiontimeout=30000
spring.mail.properties.mail.smtp.timeout=30000
spring.mail.properties.mail.smtp.writetimeout=30000

# ============================================
# JWT Security Configuration
# ============================================
# JWT secret key - MUST be set via environment variable
# Generate a secure key: openssl rand -base64 32
jwt.secret=${JWT_SECRET}
# JWT token expiration time (24 hours in milliseconds)
jwt.expiration.ms=86400000

# ============================================
# Cashfree Payment Gateway Configuration
# ============================================
# Environment: SANDBOX (testing) or PRODUCTION
cashfree.env=SANDBOX
# Cashfree App ID and Secret Key from environment variables
cashfree.appId=${APP_ID}
cashfree.secretKey=${SECRET_KEY}
# Webhook signature validation
# Set to 'true' in production for security
cashfree.webhook.signature.validation.enabled=false

# ============================================
# Application URLs
# ============================================
# Frontend URL - used for payment redirects and email links
app.frontend-url=${FRONTEND_BASE_URL}
# Backend URL - used for webhooks and API callbacks
app.backend-url=${BACKEND_BASE_URL}

# ============================================
# Logging Configuration
# ============================================
# Log file location (relative to application root)
logging.file.name=logs/application.log
# Root logging level: TRACE, DEBUG, INFO, WARN, ERROR
logging.level.root=INFO
# Application-specific logging (optional)
# logging.level.com.ashwani.HealthCare=DEBUG

# ============================================
# Spring Boot Actuator Configuration
# ============================================
# Expose health and info endpoints for monitoring
management.endpoints.web.exposure.include=health,info
# Show health details: never, when-authorized, always
# 'when-authorized' shows details only to authenticated users
management.endpoint.health.show-details=when-authorized
# Enable all default health indicators
management.health.defaults.enabled=true

# Health Indicator Configuration
# Enable specific health checks
management.health.db.enabled=true
management.health.rabbit.enabled=true
management.health.diskspace.enabled=true
management.health.ping.enabled=true

# Health Check Groups (for Kubernetes/container orchestration)
# Liveness probe: checks if the application is running
management.endpoint.health.group.liveness.include=ping
# Readiness probe: checks if the application is ready to serve traffic
management.endpoint.health.group.readiness.include=db,rabbit,ping

# Disk space health check threshold (minimum free space required)
management.health.diskspace.threshold=10MB